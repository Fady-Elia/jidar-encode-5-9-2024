<?php @eval("?>".base64_decode("PD9waHANCmlmIChzZXNzaW9uX3N0YXR1cygpID09IFBIUF9TRVNTSU9OX05PTkUpIHsNCiAgICBzZXNzaW9uX3N0YXJ0KCk7DQp9DQppbmNsdWRlX29uY2UgIi4uL2RiY29uZmlnLnBocCI7DQpjbGFzcyBNb2R1bGVDbGFzc3sNCiAgICBwcml2YXRlICRkYjsNCg0KICAgIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkNCiAgICB7DQogICAgICAgICR0aGlzLT5kYiA9IERhdGFiYXNlOjpjb25maWcoKTsNCiAgICAgIA0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gQWRkKCR0aXRsZV9hciwkdGl0bGVfZW4sJGRldGFpbHNhciwkZGV0YWlsc2VuLCRmaWxlX2luc2VydCwkc2hvdykNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJpbnNlcnQgaW50byAgc2xpZGVyIHZhbHVlcyhudWxsLCckZmlsZV9pbnNlcnQnLCckdGl0bGVfYXInLCckdGl0bGVfZW4nLCckZGV0YWlsc2VuJywnJGRldGFpbHNhcicsJyRzaG93JykiKTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgICAgICByZXR1cm4gJHN0bXQ7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgIH0NCg0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldFJvd0J5SWQoJGlkKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NIHN0YXRpc3RpY3MgV0hFUkUgaWQ9OmlkIik7DQoJCQkkc3RtdC0+YmluZFBhcmFtKCc6aWQnLCRpZCxQRE86OlBBUkFNX0lOVCk7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICAgJFJvdyA9ICRzdG10LT5mZXRjaChQRE86OkZFVENIX0FTU09DKTsNCiAgICAgICAgICAgIHJldHVybiAkUm93Ow0KDQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QWxsRGF0YSgpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkcmVzcG9uY2U9IGFycmF5KCk7DQogICAgICAgICAgICAkaT0wOw0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoInNlbGVjdCAqIGZyb20gc3RhdGlzdGljcyBvcmRlciBieSBpZCBkZXNjIik7DQoJDQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KDQogICAgICAgICAgICB3aGlsZSgkcm93PSRzdG10LT5mZXRjaChQRE86OkZFVENIX0FTU09DKSl7DQogICAgICAgICAgICAgICAgJHNsaWRlX2lkPSRyb3dbJ2lkJ107DQogICAgICAgICAgICAgICAgJHZhbHVlPSRyb3dbJ3ZhbHVlJ107DQogICAgICAgICAgICAgICAgLy8gJHBvcnQ9JHJvd1sncG9ydCddOw0KICANCiAgICAgICAgICAgICAgICAvLyAkc210cHNlY3VyZT0kcm93WydzbXRwc2VjdXJlJ107DQogICAgICAgICAgICAgICAgLy8gJGVtYWlsPSRyb3dbJ2VtYWlsJ107DQogICAgICAgICAgICAgICAgLy8gJHBhc3N3b3JkPSRyb3dbJ3Bhc3N3b3JkJ107DQogICAgICAgICAgICAgICAgaWYoJHJvd1sndHlwZSddID09IDApDQogICAgICAgICAgICAgICAgJHR5cGU9J0N1cnJlbnQgUHJvamVjdHMnOw0KICAgICAgICAgICAgZWxzZWlmKCRyb3dbJ3R5cGUnXT09MSkNCiAgICAgICAgICAgICAgICAgICR0eXBlPSdDb21wbGV0ZWQgUHJvamVjdHMgJzsNCiAgICAgICAgICAgICAgICAgZWxzZWlmKCRyb3dbJ3R5cGUnXT09MikNCiAgICAgICAgICAgICAgICAgICR0eXBlPSdQcm9qZWN0cyBVbmRlciBDb25zdHJ1Y3Rpb24nOw0KICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAkdHlwZT0nUmVhbGx5IEhhcHB5IENsaWVudHMnOw0KICAgICAgICAgICAgICAgIC8vICRzbGlkZWltYWdlPSRyb3dbJ3NsaWRlcl9pbWFnZSddOw0KICAgICAgICAgICAgICAgIC8vICRpbWc9JzxpbWcgc3R5bGU9ImhlaWdodDogNzVweDsiIHNyYz0iLi4vLi4vLi4vdXBsb2Fkcy8nLiRzbGlkZWltYWdlLiciIGFsdD0iIiB3aWR0aD0iMTUwcHgiIGhpZ2h0PSIxNTBweCIvPic7DQoNCiAgICAgICAgICAgICAgICAkZWRpdFJvdz0nPGEgb25jbGljaz0iZ2V0RGF0YSgnLiRzbGlkZV9pZC4nKSIgaHJlZj0iIyI+PGkgY2xhc3M9Imljb24tZWRpdCBiaWdnZXItMTMwIj48L2k+PC9hPic7DQogICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgJHJlc3BvbmNlW109YXJyYXkoICRpKzEsJHR5cGUsJHZhbHVlLCRlZGl0Um93KTsNCiAgICAgICAgICAgICAgICAkaSsrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkcmVzdWx0cyA9IFsic0VjaG8iID0+IDEsDQogICAgICAgIAkiaVRvdGFsUmVjb3JkcyIgPT4gY291bnQoJHJlc3BvbmNlKSwNCiAgICAgICAgCSJpVG90YWxEaXNwbGF5UmVjb3JkcyIgPT4gY291bnQoJHJlc3BvbmNlKSwNCiAgICAgICAgCSJhYURhdGEiID0+ICRyZXNwb25jZSBdOw0KICAgICAgICAgICAgcmV0dXJuICRyZXN1bHRzOw0KICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZURhdGEoJGVkaXRfaWQsJHZhbHVlKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KDQogICAgICAgICANCiAgICAgICAgICAgDQogICAgICAgICAgICAkcXVlcnk9InVwZGF0ZSBzdGF0aXN0aWNzIHNldCB2YWx1ZT0nJHZhbHVlJyB3aGVyZSBpZD0kZWRpdF9pZCI7DQogICAgICAgICAgIA0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoJHF1ZXJ5KTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICAgcmV0dXJuICAkc3RtdDsNCiAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBEZWxldGUoJGFjdElkKXsNCiAgICAgICAgdHJ5ew0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoIkRFTEVURSBGUk9NIHNsaWRlciBXSEVSRSBpZD06aWQiKTsNCiAgICAgICAgICAgICRzdG10LT5iaW5kUGFyYW0oJzppZCcsJGFjdElkLFBETzo6UEFSQU1fSU5UKTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfWNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQo/Pg=="));