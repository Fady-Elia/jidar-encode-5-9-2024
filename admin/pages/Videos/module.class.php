<?php @eval("?>".base64_decode("PD9waHANCmlmIChzZXNzaW9uX3N0YXR1cygpID09IFBIUF9TRVNTSU9OX05PTkUpIHsNCiAgICBzZXNzaW9uX3N0YXJ0KCk7DQp9DQppbmNsdWRlX29uY2UgIi4uL2RiY29uZmlnLnBocCI7DQpjbGFzcyBNb2R1bGVDbGFzc3sNCiAgICBwcml2YXRlICRkYjsNCg0KICAgIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkNCiAgICB7DQogICAgICAgICR0aGlzLT5kYiA9IERhdGFiYXNlOjpjb25maWcoKTsNCiAgICAgIA0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gQWRkKCR0aXRsZV9hciwkdGl0bGVfZW4sJGZpbGVfaW5zZXJ0KQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoImluc2VydCBpbnRvICBnYWxsZXJ5ICh1cmwsbmFtZV9hcixuYW1lX2VuLHR5cGUpIHZhbHVlcygnJGZpbGVfaW5zZXJ0JywnJHRpdGxlX2FyJywnJHRpdGxlX2VuJywnMScpIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICAgcmV0dXJuICRzdG10Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRSb3dCeUlkKCRpZCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSBnYWxsZXJ5IFdIRVJFIGlkPTppZCIpOw0KCQkJJHN0bXQtPmJpbmRQYXJhbSgnOmlkJywkaWQsUERPOjpQQVJBTV9JTlQpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgICAgICRSb3cgPSAkc3RtdC0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQyk7DQogICAgICAgICAgICByZXR1cm4gJFJvdzsNCg0KICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldEFsbERhdGEoKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHJlc3BvbmNlPSBhcnJheSgpOw0KICAgICAgICAgICAgJGk9MDsNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tIGdhbGxlcnkgd2hlcmUgdHlwZT0nMScgb3JkZXIgYnkgaWQgZGVzYyIpOw0KCQ0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCg0KICAgICAgICAgICAgd2hpbGUoJHJvdz0kc3RtdC0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQykpew0KICAgICAgICAgICAgICAgICRzbGlkZV9pZD0kcm93WydpZCddOw0KICAgICAgICAgICAgICAgICR0aXRsZV9hcj0kcm93WyduYW1lX2FyJ107DQogICAgICAgICAgICAgICAgJHRpdGxlX2VuPSRyb3dbJ25hbWVfZW4nXTsNCiAgDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICRzbGlkZWltYWdlPSRyb3dbJ3VybCddOw0KICAgICAgICAgICAgICAgICRpbWc9JzxhIGhyZWY9IicuJHNsaWRlaW1hZ2UuJyIgPicuJHNsaWRlaW1hZ2UuJzwvYT4nOw0KICAgICAgICAgICAgICAgICRlZGl0Um93PSc8YSBvbmNsaWNrPSJnZXREYXRhKCcuJHNsaWRlX2lkLicpIiBocmVmPSIjIj48aSBjbGFzcz0iaWNvbi1lZGl0IGJpZ2dlci0xMzAiPjwvaT48L2E+JzsNCiAgICAgICAgICAgICAgICAkZGVsZXRlUm93PSc8YSBvbmNsaWNrPSJkZWxldGVfZGF0YSgnLiRzbGlkZV9pZC4nKSIgaHJlZj0iIyIgY2xhc3M9ImRlbGV0ZSI+PGkgY2xhc3M9Imljb24tdHJhc2ggYmlnZ2VyLTEzMCI+PC9pPjwvYT4nOw0KICAgICAgICAgICAgICAgICRyZXNwb25jZVtdPWFycmF5KCAkaSsxLCRpbWcsJHRpdGxlX2FyLCR0aXRsZV9lbiwkZWRpdFJvdywkZGVsZXRlUm93KTsNCiAgICAgICAgICAgICAgICAkaSsrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkcmVzdWx0cyA9IFsic0VjaG8iID0+IDEsDQogICAgICAgIAkiaVRvdGFsUmVjb3JkcyIgPT4gY291bnQoJHJlc3BvbmNlKSwNCiAgICAgICAgCSJpVG90YWxEaXNwbGF5UmVjb3JkcyIgPT4gY291bnQoJHJlc3BvbmNlKSwNCiAgICAgICAgCSJhYURhdGEiID0+ICRyZXNwb25jZSBdOw0KICAgICAgICAgICAgcmV0dXJuICRyZXN1bHRzOw0KICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZURhdGEoJHR5LCRlZGl0X2lkLCR0aXRsZV9hciwkdGl0bGVfZW4sJGZpbGVfaW5zZXJ0KQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KDQogICAgICAgIA0KICAgICAgICAgICAgJHF1ZXJ5PSJ1cGRhdGUgZ2FsbGVyeSBzZXQgbmFtZV9hcj0nJHRpdGxlX2FyJyxuYW1lX2VuPSckdGl0bGVfZW4nLHVybD0nJGZpbGVfaW5zZXJ0JyB3aGVyZSBpZD0kZWRpdF9pZCI7DQogICAgICAgICAgIA0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoJHF1ZXJ5KTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICAgcmV0dXJuICAkc3RtdDsNCiAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBEZWxldGUoJGFjdElkKXsNCiAgICAgICAgdHJ5ew0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoIkRFTEVURSBGUk9NIGdhbGxlcnkgV0hFUkUgaWQ9OmlkIik7DQogICAgICAgICAgICAkc3RtdC0+YmluZFBhcmFtKCc6aWQnLCRhY3RJZCxQRE86OlBBUkFNX0lOVCk7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH1jYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KPz4="));