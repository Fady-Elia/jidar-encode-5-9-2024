<?php @eval("?>".base64_decode("PD9waHANCmlmIChzZXNzaW9uX3N0YXR1cygpID09IFBIUF9TRVNTSU9OX05PTkUpIHsNCiAgICBzZXNzaW9uX3N0YXJ0KCk7DQp9DQppbmNsdWRlX29uY2UgIi4uL2RiY29uZmlnLnBocCI7DQpjbGFzcyBNb2R1bGVDbGFzc3sNCiAgICBwcml2YXRlICRkYjsNCg0KICAgIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkNCiAgICB7DQogICAgICAgICR0aGlzLT5kYiA9IERhdGFiYXNlOjpjb25maWcoKTsNCiAgICAgIA0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gQWRkKCR0aXRsZV9hciwkdGl0bGVfZW4sJGZpbGVfaW5zZXJ0KQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoImluc2VydCBpbnRvICBnYWxsZXJ5ICh1cmwsbmFtZV9hcixuYW1lX2VuLHR5cGUpIHZhbHVlcygnJGZpbGVfaW5zZXJ0JywnJHRpdGxlX2FyJywnJHRpdGxlX2VuJywnMCcpIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICAgcmV0dXJuICRzdG10Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRSb3dCeUlkKCRpZCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSBnYWxsZXJ5IFdIRVJFIGlkPTppZCIpOw0KCQkJJHN0bXQtPmJpbmRQYXJhbSgnOmlkJywkaWQsUERPOjpQQVJBTV9JTlQpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgICAgICRSb3cgPSAkc3RtdC0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQyk7DQogICAgICAgICAgICByZXR1cm4gJFJvdzsNCg0KICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldEFsbERhdGEoKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHJlc3BvbmNlPSBhcnJheSgpOw0KICAgICAgICAgICAgJGk9MDsNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tIGdhbGxlcnkgd2hlcmUgdHlwZT0nMCcgb3JkZXIgYnkgaWQgZGVzYyIpOw0KCQ0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCg0KICAgICAgICAgICAgd2hpbGUoJHJvdz0kc3RtdC0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQykpew0KICAgICAgICAgICAgICAgICRzbGlkZV9pZD0kcm93WydpZCddOw0KICAgICAgICAgICAgICAgICR0aXRsZV9hcj0kcm93WyduYW1lX2FyJ107DQogICAgICAgICAgICAgICAgJHRpdGxlX2VuPSRyb3dbJ25hbWVfZW4nXTsNCiAgDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICRzbGlkZWltYWdlPSRyb3dbJ3VybCddOw0KICAgICAgICAgICAgICAgICRpbWc9JzxpbWcgc3R5bGU9ImhlaWdodDogNzVweDsiIHNyYz0iLi4vLi4vLi4vdXBsb2Fkcy8nLiRzbGlkZWltYWdlLiciIGFsdD0iIiB3aWR0aD0iMTUwcHgiIGhpZ2h0PSIxNTBweCIvPic7DQogICAgICAgICAgICAgICAgJGVkaXRSb3c9JzxhIG9uY2xpY2s9ImdldERhdGEoJy4kc2xpZGVfaWQuJykiIGhyZWY9IiMiPjxpIGNsYXNzPSJpY29uLWVkaXQgYmlnZ2VyLTEzMCI+PC9pPjwvYT4nOw0KICAgICAgICAgICAgICAgICRkZWxldGVSb3c9JzxhIG9uY2xpY2s9ImRlbGV0ZV9kYXRhKCcuJHNsaWRlX2lkLicpIiBocmVmPSIjIiBjbGFzcz0iZGVsZXRlIj48aSBjbGFzcz0iaWNvbi10cmFzaCBiaWdnZXItMTMwIj48L2k+PC9hPic7DQogICAgICAgICAgICAgICAgJHJlc3BvbmNlW109YXJyYXkoICRpKzEsJGltZywkdGl0bGVfYXIsJHRpdGxlX2VuLCRlZGl0Um93LCRkZWxldGVSb3cpOw0KICAgICAgICAgICAgICAgICRpKys7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRyZXN1bHRzID0gWyJzRWNobyIgPT4gMSwNCiAgICAgICAgCSJpVG90YWxSZWNvcmRzIiA9PiBjb3VudCgkcmVzcG9uY2UpLA0KICAgICAgICAJImlUb3RhbERpc3BsYXlSZWNvcmRzIiA9PiBjb3VudCgkcmVzcG9uY2UpLA0KICAgICAgICAJImFhRGF0YSIgPT4gJHJlc3BvbmNlIF07DQogICAgICAgICAgICByZXR1cm4gJHJlc3VsdHM7DQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlRGF0YSgkdHksJGVkaXRfaWQsJHRpdGxlX2FyLCR0aXRsZV9lbiwkZmlsZV9pbnNlcnQpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQoNCiAgICAgICAgICAgIGlmKCR0eT09MSl7DQogICAgICAgICAgICAkcXVlcnk9InVwZGF0ZSBnYWxsZXJ5IHNldCBuYW1lX2FyPSckdGl0bGVfYXInLG5hbWVfZW49JyR0aXRsZV9lbicsdXJsPSckZmlsZV9pbnNlcnQnIHdoZXJlIGlkPSRlZGl0X2lkIjsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgJHF1ZXJ5PSJ1cGRhdGUgZ2FsbGVyeSBzZXQgbmFtZV9hcj0nJHRpdGxlX2FyJyxuYW1lX2VuPSckdGl0bGVfZW4nIHdoZXJlIGlkPSRlZGl0X2lkIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCRxdWVyeSk7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIHJldHVybiAgJHN0bXQ7DQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gRGVsZXRlKCRhY3RJZCl7DQogICAgICAgIHRyeXsNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJERUxFVEUgRlJPTSBnYWxsZXJ5IFdIRVJFIGlkPTppZCIpOw0KICAgICAgICAgICAgJHN0bXQtPmJpbmRQYXJhbSgnOmlkJywkYWN0SWQsUERPOjpQQVJBTV9JTlQpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9Y2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCj8+"));