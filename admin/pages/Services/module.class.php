<?php @eval("?>".base64_decode("PD9waHANCmlmIChzZXNzaW9uX3N0YXR1cygpID09IFBIUF9TRVNTSU9OX05PTkUpIHsNCiAgICBzZXNzaW9uX3N0YXJ0KCk7DQp9DQppbmNsdWRlX29uY2UgIi4uL2RiY29uZmlnLnBocCI7DQpjbGFzcyBNb2R1bGVDbGFzc3sNCiAgICBwcml2YXRlICRkYjsNCg0KICAgIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkNCiAgICB7DQogICAgICAgICR0aGlzLT5kYiA9IERhdGFiYXNlOjpjb25maWcoKTsNCiAgICAgIA0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gQWRkKCR0aXRsZV9hciwkdGl0bGVfZW4sJGRldGFpbHNhciwkZGV0YWlsc2VuLCRmaWxlX2luc2VydCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICAkb3BkYXRlPSAobmV3IFxEYXRlVGltZSgpKS0+Zm9ybWF0KCdZLW0tZCcpOw0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoImluc2VydCBpbnRvICBzZXJ2aWNlcyAoaW1nLG5hbWVfYXIsbmFtZV9lbixkZXNjX2VuLGRlc2NfYXIpIHZhbHVlcygnJGZpbGVfaW5zZXJ0JywnJHRpdGxlX2FyJywnJHRpdGxlX2VuJywnJGRldGFpbHNlbicsJyRkZXRhaWxzYXInKSIpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgICAgIHJldHVybiAkc3RtdDsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Um93QnlJZCgkaWQpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gc2VydmljZXMgV0hFUkUgaWQ9OmlkIik7DQoJCQkkc3RtdC0+YmluZFBhcmFtKCc6aWQnLCRpZCxQRE86OlBBUkFNX0lOVCk7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICAgJFJvdyA9ICRzdG10LT5mZXRjaChQRE86OkZFVENIX0FTU09DKTsNCiAgICAgICAgICAgIHJldHVybiAkUm93Ow0KDQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QWxsRGF0YSgpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkcmVzcG9uY2U9IGFycmF5KCk7DQogICAgICAgICAgICAkaT0wOw0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoInNlbGVjdCAqIGZyb20gc2VydmljZXMgb3JkZXIgYnkgaWQgZGVzYyIpOw0KCQ0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCg0KICAgICAgICAgICAgd2hpbGUoJHJvdz0kc3RtdC0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQykpew0KICAgICAgICAgICAgICAgICRzbGlkZV9pZD0kcm93WydpZCddOw0KICAgICAgICAgICAgICAgICR0aXRsZV9hcj0kcm93WyduYW1lX2FyJ107DQogICAgICAgICAgICAgICAgJHRpdGxlX2VuPSRyb3dbJ25hbWVfZW4nXTsNCiAgDQogICAgICAgICAgICAgICAgJGRldGFpbHNfYXI9JHJvd1snZGVzY19hciddOw0KICAgICAgICAgICAgICAgICRkZXRhaWxzX2VuPSRyb3dbJ2Rlc2NfZW4nXTsNCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICRzbGlkZWltYWdlPSRyb3dbJ2ltZyddOw0KICAgICAgICAgICAgICAgICRpbWc9JzxpbWcgc3R5bGU9ImhlaWdodDogNzVweDsiIHNyYz0iLi4vLi4vLi4vdXBsb2Fkcy8nLiRzbGlkZWltYWdlLiciIGFsdD0iIiB3aWR0aD0iMTUwcHgiIGhpZ2h0PSIxNTBweCIvPic7DQogICAgICAgICAgICAgICAgJGVkaXRSb3c9JzxhIG9uY2xpY2s9ImdldERhdGEoJy4kc2xpZGVfaWQuJykiIGhyZWY9IiMiPjxpIGNsYXNzPSJpY29uLWVkaXQgYmlnZ2VyLTEzMCI+PC9pPjwvYT4nOw0KICAgICAgICAgICAgICAgICRkZWxldGVSb3c9JzxhIG9uY2xpY2s9ImRlbGV0ZV9kYXRhKCcuJHNsaWRlX2lkLicpIiBocmVmPSIjIiBjbGFzcz0iZGVsZXRlIj48aSBjbGFzcz0iaWNvbi10cmFzaCBiaWdnZXItMTMwIj48L2k+PC9hPic7DQogICAgICAgICAgICAgICAgJHJlc3BvbmNlW109YXJyYXkoICRpKzEsJGltZywkdGl0bGVfYXIsJHRpdGxlX2VuLCRkZXRhaWxzX2FyLCRkZXRhaWxzX2VuLCRlZGl0Um93LCRkZWxldGVSb3cpOw0KICAgICAgICAgICAgICAgICRpKys7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRyZXN1bHRzID0gWyJzRWNobyIgPT4gMSwNCiAgICAgICAgCSJpVG90YWxSZWNvcmRzIiA9PiBjb3VudCgkcmVzcG9uY2UpLA0KICAgICAgICAJImlUb3RhbERpc3BsYXlSZWNvcmRzIiA9PiBjb3VudCgkcmVzcG9uY2UpLA0KICAgICAgICAJImFhRGF0YSIgPT4gJHJlc3BvbmNlIF07DQogICAgICAgICAgICByZXR1cm4gJHJlc3VsdHM7DQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlRGF0YSgkdHksJGVkaXRfaWQsJHRpdGxlX2FyLCR0aXRsZV9lbiwkZGV0YWlsc2FyLCRkZXRhaWxzZW4sJGZpbGVfaW5zZXJ0KQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KDQogICAgICAgICAgICBpZigkdHk9PTEpew0KICAgICAgICAgICAgJHF1ZXJ5PSJ1cGRhdGUgc2VydmljZXMgc2V0IG5hbWVfYXI9JyR0aXRsZV9hcicsbmFtZV9lbj0nJHRpdGxlX2VuJyxkZXNjX2FyPSckZGV0YWlsc2FyJyxkZXNjX2VuPSckZGV0YWlsc2VuJyxpbWc9JyRmaWxlX2luc2VydCcgd2hlcmUgaWQ9JGVkaXRfaWQiOw0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAkcXVlcnk9InVwZGF0ZSBzZXJ2aWNlcyBzZXQgbmFtZV9hcj0nJHRpdGxlX2FyJyxuYW1lX2VuPSckdGl0bGVfZW4nLGRlc2NfYXI9JyRkZXRhaWxzYXInLGRlc2NfZW49JyRkZXRhaWxzZW4nIHdoZXJlIGlkPSRlZGl0X2lkIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCRxdWVyeSk7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIHJldHVybiAgJHN0bXQ7DQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gRGVsZXRlKCRhY3RJZCl7DQogICAgICAgIHRyeXsNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJERUxFVEUgRlJPTSBzZXJ2aWNlcyBXSEVSRSBpZD06aWQiKTsNCiAgICAgICAgICAgICRzdG10LT5iaW5kUGFyYW0oJzppZCcsJGFjdElkLFBETzo6UEFSQU1fSU5UKTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfWNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQo/Pg=="));