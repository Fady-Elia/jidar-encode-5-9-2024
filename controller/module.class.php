<?php @eval("?>".base64_decode("PD9waHANCg0KaWYgKHNlc3Npb25fc3RhdHVzKCkgPT0gUEhQX1NFU1NJT05fTk9ORSkgew0KICAgIHNlc3Npb25fc3RhcnQoKTsgDQp9DQppbmNsdWRlX29uY2UgImRiY29uZmlnLnBocCI7DQpjbGFzcyBNb2R1bGVDbGFzc3sNCiAgICANCiAgICBwcml2YXRlICRkYjsNCiANCiAgICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpDQogICAgew0KICAgICAgICAkdGhpcy0+ZGIgPSBEYXRhYmFzZTo6Y29uZmlnKCk7IA0KDQogICAgfQ0KICAgIC8vZ2V0IHBhZ2UgdGl0bGUNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0VGl0bGUoKQ0KICAgIHsNCiAgICAgICAgZ2xvYmFsICRwYWdlVGl0bGU7DQogICAgICAgIGlmKGlzc2V0KCRwYWdlVGl0bGUpKQ0KICAgICAgICB7DQogICAgICAgICAgZWNobyAiJHBhZ2VUaXRsZSI7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIGVjaG8gIldlbGNvbWUgfCBKaWRhciI7DQogICAgICAgIH0NCiAgICB9IA0KDQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0X2RhdGEoKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoInNlbGVjdCAqIGZyb20gd2Vic2l0ZV9kYXRhIGxpbWl0IDEiKTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgICAgICAkUm93ID0gJHN0bXQtPmZldGNoKFBETzo6RkVUQ0hfQVNTT0MpOw0KICAgICAgICAgICAgcmV0dXJuICRSb3c7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0c2xpZGVyKCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tICAgc2xpZGVyICIpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICRzdG10Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIA0KDQogICAgfQ0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRjYXRlZ29yaWVzKCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tICBjYXRlZ29yaWVzIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICANCiAgICAgICAgICAgIHJldHVybiAkc3RtdDsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICANCg0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0YnJhbmNoZXMoKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoInNlbGVjdCAqIGZyb20gIGJyYW5jaGVzIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICANCiAgICAgICAgICAgIHJldHVybiAkc3RtdDsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICANCg0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0cHJvZHVjdHNsaW1pdCgpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgic2VsZWN0IHByb2R1Y3RzLiosY2F0ZWdvcmllcy5uYW1lX2FyIGFzIGNhdF9hcixjYXRlZ29yaWVzLm5hbWVfZW4gYXMgY2F0X2VuIGZyb20gcHJvZHVjdHMgbGVmdCBqb2luIGNhdGVnb3JpZXMgb24gY2F0ZWdvcmllcy5pZD1wcm9kdWN0cy5jYXRfaWQgIG9yZGVyIGJ5IHByb2R1Y3RzLmlkIGRlc2MgbGltaXQgNiIpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gJHN0bXQ7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgDQoNCiAgICB9DQogICAgcHVibGljIGZ1bmN0aW9uIGdldHByb2R1Y3RzX25hbWUoJG5hbWUpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgic2VsZWN0ICBwcm9kdWN0cy4qLGNhdGVnb3JpZXMubmFtZV9hciBhcyBjYXRfYXIsY2F0ZWdvcmllcy5uYW1lX2VuIGFzIGNhdF9lbiBmcm9tICBwcm9kdWN0cyBsZWZ0IGpvaW4gY2F0ZWdvcmllcyBvbiBjYXRlZ29yaWVzLmlkPXByb2R1Y3RzLmNhdF9pZCB3aGVyZSBwcm9kdWN0cy5uYW1lX2VuIGxpa2UgJyUkbmFtZSUnIG9yIHByb2R1Y3RzLm5hbWVfYXIgbGlrZSAnJSRuYW1lJScgb3JkZXIgYnkgcHJvZHVjdHMuaWQgZGVzYyAiKTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICRzdG10Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIA0KDQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldHByb2R1Y3RzX2NhdCgkY2F0X2lkKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoInNlbGVjdCAgcHJvZHVjdHMuKixjYXRlZ29yaWVzLm5hbWVfYXIgYXMgY2F0X2FyLGNhdGVnb3JpZXMubmFtZV9lbiBhcyBjYXRfZW4gZnJvbSAgcHJvZHVjdHMgbGVmdCBqb2luIGNhdGVnb3JpZXMgb24gY2F0ZWdvcmllcy5pZD1wcm9kdWN0cy5jYXRfaWQgd2hlcmUgcHJvZHVjdHMuY2F0X2lkID0gJyRjYXRfaWQnIG9yZGVyIGJ5IHByb2R1Y3RzLmlkIGRlc2MgIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICANCiAgICAgICAgICAgIHJldHVybiAkc3RtdDsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICANCg0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRwcm9kdWN0cygpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgic2VsZWN0ICBwcm9kdWN0cy4qLGNhdGVnb3JpZXMubmFtZV9hciBhcyBjYXRfYXIsY2F0ZWdvcmllcy5uYW1lX2VuIGFzIGNhdF9lbiBmcm9tICBwcm9kdWN0cyBsZWZ0IGpvaW4gY2F0ZWdvcmllcyBvbiBjYXRlZ29yaWVzLmlkPXByb2R1Y3RzLmNhdF9pZCAgb3JkZXIgYnkgcHJvZHVjdHMuaWQgZGVzYyAiKTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICRzdG10Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIA0KDQogICAgfQ0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRwcm9kdWN0c19pZCgkaWQpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgic2VsZWN0ICogZnJvbSAgcHJvZHVjdHMgd2hlcmUgaWQ9JyRpZCcgIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICANCiAgICAgICAgICAgICRSb3cgPSAkc3RtdC0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQyk7DQogICAgICAgICAgICByZXR1cm4gJFJvdzsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICANCg0KICAgIH0NCg0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldHNlcnZpY2VzKCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tICBzZXJ2aWNlcyIpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gJHN0bXQ7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgDQoNCiAgICB9DQogICAgcHVibGljIGZ1bmN0aW9uIGdldHNlcnZpY2VfaWQoJGlkKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoInNlbGVjdCAqIGZyb20gIHNlcnZpY2VzIHdoZXJlIGlkPSckaWQnICIpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgDQogICAgICAgICAgICAkUm93ID0gJHN0bXQtPmZldGNoKFBETzo6RkVUQ0hfQVNTT0MpOw0KICAgICAgICAgICAgcmV0dXJuICRSb3c7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgDQoNCiAgICB9DQogICANCg0KDQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QWxsbmV3cygpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgic2VsZWN0ICogZnJvbSAgbmV3cyBvcmRlciBieSBpZCBkZXNjICIpOw0KICAgICAgICAgICAgJHN0bXQtPmV4ZWN1dGUoKTsNCiAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gJHN0bXQ7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goUERPRXhjZXB0aW9uICRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBlY2hvICRlLT5nZXRNZXNzYWdlKCk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgDQoNCiAgICB9DQogICAgcHVibGljIGZ1bmN0aW9uIGdldG5ld3NfaWQoJGlkKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KICAgICAgICAgICAgJHN0bXQgPSAkdGhpcy0+ZGItPnByZXBhcmUoInNlbGVjdCAqIGZyb20gIG5ld3Mgd2hlcmUgaWQ9JyRpZCcgIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICANCiAgICAgICAgICAgICRSb3cgPSAkc3RtdC0+ZmV0Y2goUERPOjpGRVRDSF9BU1NPQyk7DQogICAgICAgICAgICByZXR1cm4gJFJvdzsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICANCg0KICAgIH0NCg0KDQogICAgcHVibGljIGZ1bmN0aW9uIGFkZF9tc2coJG5hbWUgLCRwaG9uZSwkZW1haWwsJG1lc3NhZ2UgKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCg0KDQogICAgICAgICANCiAgICAgICAgICAgICRxdWVyeT0iaW5zZXJ0IGludG8gY29udGFjdCAobmFtZSxwaG9uZSxlbWFpbCxtZXNzYWdlKSB2YWx1ZXMoJyRuYW1lJywnJHBob25lJywnJGVtYWlsJywnJG1lc3NhZ2UnKSI7DQogICAgICAgICAgICANCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCRxdWVyeSk7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIHJldHVybiAgJHN0bXQ7DQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0X3doeV91cygpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgic2VsZWN0ICogZnJvbSAgd2h5X3VzIik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICANCiAgICAgICAgICAgIHJldHVybiAkc3RtdDsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgcHVibGljIGZ1bmN0aW9uIGdldF9nYWxsZXJ5KCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQoNCiAgICAgICAgICAgICRzdG10ID0gJHRoaXMtPmRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tICBnYWxsZXJ5Iik7DQogICAgICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICANCiAgICAgICAgICAgIHJldHVybiAkc3RtdDsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChQRE9FeGNlcHRpb24gJGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVjaG8gJGUtPmdldE1lc3NhZ2UoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KICAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0X3NlcnZpY2VfY291bnQoKQ0KICAgIHsNCiAgICAgDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICRzdG10MSA9ICR0aGlzLT5kYi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSBzZXJ2aWNlcyAiKTsNCg0KICAgICAgICAgICAgJHN0bXQxLT5leGVjdXRlKCk7DQogICAgICAgICAgICAkY291bnQgPSAkc3RtdDEtPnJvd0NvdW50KCk7DQogICAgICAgICAgICAgIHJldHVybiAkY291bnQ7DQogICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQogICAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0X3N0YXRpc3RpY3MoJHR5cGUpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KDQogICAgICAgICAgICAkc3RtdCA9ICR0aGlzLT5kYi0+cHJlcGFyZSgic2VsZWN0ICogZnJvbSAgc3RhdGlzdGljcyB3aGVyZSB0eXBlPSckdHlwZSciKTsNCiAgICAgICAgICAgICRzdG10LT5leGVjdXRlKCk7DQogICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICRzdG10Ow0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFBET0V4Y2VwdGlvbiAkZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZWNobyAkZS0+Z2V0TWVzc2FnZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgIA0KDQoNCiAgDQoNCg0KfQ0KDQo/Pg=="));